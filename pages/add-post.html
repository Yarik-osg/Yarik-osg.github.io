<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Notera</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link rel="stylesheet" type="text/css" href="../sass/styles.css">
  <link rel="stylesheet" type="text/css" href="../sass/edit-profile.css">

</head>
<body>

<div class="header">
  <div class="heading">
    Notera</div>
  <div class="header-navbar-content">
    <a href="index.html"> Головна</a>
  </div>
  <div class="header-navbar-content">
    <a href="search.html">
      Пошук
    </a>
  </div>
  <!--      <div class="navbar-content">-->
  <!--        Друзі-->
  <!--      </div>-->
  <div class="header-navbar-content">
    <a href="stats.html">
      Статистика
    </a>
  </div>
  <div class="header1-navbar-content">
    <a href="stats.html">
      . . .
    </a>
  </div>

  <div>
    <a href="profile.html">
      <div class="profile-container">
        <img src="../img/img.png" alt="Profile photo">
      </div>
    </a>

    <a href="signin.html">
      <div class="profile-container">
        <span id="username">Sign out</span>
      </div>
    </a>
  </div>
</div>


<div class="edit-profile-content">
  <div class="caption">Post</div>


  <div id="profile-edit-area">
    <form>
      <div id="edit-area-left">
        <table>
          <tbody>
          <tr>
            <td class="edit-title">Тема:</td>
            <td><input type="text" class="profileInputBox" id="NoteName"/></td>
          </tr>
          <tr>
            <td class="edit-title">Кількість користувачів:</td>
            <td><input type="text" class="profileInputBox" id="NoteCount"/></td>
          </tr>
          <tr>
            <td class="edit-title">Користувач:</td>
            <td><input type="text" class="profileInputBox" id="NoteUser"/></td>
          </tr>
          </tbody>
        </table>
      </div>
      <div id="edit-area-right">
        <table>
          <tbody>
          </tr>
          <tr>
            <td class="edit-title">Текст:</td>
            <td><textarea class="profileInputBox" id="NoteDesc"></textarea></td>
          </tr>
          </tbody>
        </table>
      </div>
    </form>
  </div>
  <div id="profile-edit-save">
    <a>
      <button id="editSave">Додати(Змінити) пост</button>
    </a>

  </div>
</div>

<footer class="footer">
  <div class="footer-right-social">
    <a href="https://www.facebook.com/"><img src="img/footer/facebook.svg" alt=""></a>
    <a href="https://www.instagram.com/"><img src="img/footer/instagram.svg" alt=""></a>
  </div>
  <div class="footer-left">
    <div class="footer-links">
      <a class="link-1" href="#">About</a>
      <a href="#">Contact us</a>
    </div>
    <div class="copyright">Notera &copy; 2021</div>
  </div>
</footer>
</body>
<script>
  document.getElementById("editSave").addEventListener("click", grabData);
  function grabData() {
    const storedName=document.getElementById("NoteName").value
    const storedDescription=document.getElementById("NoteDesc").value
    const storedCountUser=document.getElementById("NoteCount").value
    const storedUser=document.getElementById("NoteUser").value
    addUser(storedName,storedDescription,storedCountUser,storedUser)
    console.log(storedName,storedDescription,storedCountUser,storedUser)
  }
  function addUser(storedName,storedDescription,storedCountUser,storedUser) {
    const Data = {
      name: storedName,
      description: storedDescription,
      count_of_users: storedCountUser,
      id_users: storedUser
    };
    console.log(Data)
    const jsonString = JSON.stringify(Data);
    const request = new XMLHttpRequest();
    request.open("POST", "http://127.0.0.1:8082/note", true);
    request.setRequestHeader("Content-Type", "application/json");
    request.onload = function () {
      if (this.status === 200) {
        const note = JSON.parse(this.responseText);
        console.log(note);
        window.location.href="profile.html"
      }
    }
    request.send(jsonString)
  }
</script>
</html>
